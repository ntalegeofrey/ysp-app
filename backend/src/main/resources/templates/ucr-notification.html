<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Condition Report Notification</title>
</head>
<body style="margin:0;padding:0;background:#f3f4f6;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;color:#111827;">
    <div style="max-width:640px;margin:20px auto;background:#ffffff;border-radius:12px;border:1px solid #e5e7eb;overflow:hidden;box-shadow:0 10px 25px rgba(15,23,42,0.12);">
        
        <!-- Header -->
        <div style="display:flex;align-items:center;padding:16px 20px;border-bottom:1px solid #e5e7eb;background:linear-gradient(135deg, #14558f 0%, #4377A5 100%);color:#e5e7eb;">
            <div style="width:40px;height:40px;border-radius:9999px;background:rgba(255,255,255,0.2);display:flex;align-items:center;justify-content:center;margin-right:12px;overflow:hidden;">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQmhQFtMkVqvEE5tqK1_lEg9I6A2xwc80ZCuQ&s" alt="DYS Logo" style="width:100%;height:100%;object-fit:contain;border-radius:9999px;"/>
            </div>
            <div style="flex:1;">
                <div style="font-size:13px;letter-spacing:0.08em;text-transform:uppercase;color:#9ca3af;">Commonwealth of Massachusetts</div>
                <div style="font-size:16px;font-weight:700;color:#f9fafb;">Department of Youth Services • Unit Condition Report</div>
                <div style="font-size:12px;color:#9ca3af;margin-top:2px;">Program: <span th:text="${programName}"></span></div>
            </div>
        </div>
        
        <!-- Body -->
        <div style="padding:20px 24px 18px;">
            <!-- Priority & Category Badge -->
            <div style="margin-bottom:10px;" th:if="${priority != null and !#strings.isEmpty(priority)}">
                <span th:style="'display:inline-block;padding:4px 10px;border-radius:9999px;font-size:11px;font-weight:600;letter-spacing:0.08em;text-transform:uppercase;color:#ffffff;background:' + ${priorityColor}">
                    <span th:text="${priority}"></span>
                </span>
                <span th:if="${category != null and !#strings.isEmpty(category)}" style="margin-left:8px;font-size:11px;color:#4b5563;text-transform:uppercase;letter-spacing:0.08em;" th:text="${category}"></span>
            </div>
            
            <!-- Report Meta -->
            <div style="font-size:13px;color:#4b5563;margin-bottom:12px;">
                <div th:if="${reportDate != null}"><strong>Date:</strong> <span th:text="${reportDate}"></span></div>
                <div th:if="${shiftTime != null}"><strong>Shift:</strong> <span th:text="${shiftTime}"></span></div>
                <div th:if="${reportedBy != null}"><strong>Reported By:</strong> <span th:text="${reportedBy}"></span></div>
            </div>
            
            <!-- Narrative (unescaped HTML) -->
            <div style="margin-top:12px;padding:16px;background:#f9fafb;border-radius:8px;border-left:3px solid #14558f;">
                <div style="font-size:14px;font-weight:500;color:#111827;margin-bottom:8px;">Report Details</div>
                <div style="font-size:13px;line-height:1.6;color:#374151;white-space:pre-wrap;" th:utext="${narrative}"></div>
            </div>
            
            <!-- Footer Note -->
            <div style="margin-top:16px;padding:12px;background:#fef3c7;border-radius:6px;font-size:12px;color:#92400e;">
                <strong>⚠️ Note:</strong> This is an automated notification. Please review the full report in the DYS system.
            </div>
        </div>
        
        <!-- Footer -->
        <div style="padding:16px 24px;background:#f9fafb;border-top:1px solid #e5e7eb;text-align:center;">
            <p style="margin:0;font-size:11px;color:#6b7280;">This email was automatically sent by the DYS Unit Condition Reporting System.</p>
            <p style="margin:4px 0 0 0;font-size:11px;color:#9ca3af;">© <span th:text="${currentYear}"></span> Massachusetts Department of Youth Services</p>
        </div>
        
    </div>
</body>
</html>
